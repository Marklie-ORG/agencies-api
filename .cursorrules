# agencies-api Rules

- Purpose: Organization/clients management, auth, FB integrations. Node/Express with pnpm; source under `app/src`.
- Commands:
  - Install: `cd app && corepack enable && pnpm i`
  - Dev: `cd app && pnpm watch`
  - Build: `cd app && pnpm build:all`
- Conventions:
  - Keep controllers in `app/src/lib/controllers`, services in `app/src/lib/services`, shared utils in `lib/utils`.
  - Validate inputs (Zod or existing validators). Return typed DTOs.
  - Use `markly-ts-core` types/utilities when available.
  - Donâ€™t reformat unrelated files; keep diffs minimal.
- Cross-service:
  - If public contracts change, update `reports-frontend` services and any shared types in `markly-ts-core`.
  - Coordinate FB data utils with `reports-service` when applicable. 